{"version":3,"file":"addlink.min.js","sources":["../src/addlink.js"],"sourcesContent":["import $ from 'jquery';\r\nimport ModalForm from 'core_form/modalform';\r\n\r\nconst Selectors = {\r\n    addBtn: '.linkman-add',\r\n    linkmanTable: 'linkman-table',\r\n};\r\n\r\nfunction initAddForm(e) {\r\n    e.preventDefault();\r\n    const element = e.target;\r\n    const modalForm = getForm(element);\r\n    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, () => {\r\n        setTimeout(function() {\r\n            location.reload();\r\n        }, 300);\r\n    } );\r\n    // Show the form.\r\n    modalForm.show();\r\n}\r\n\r\nfunction getForm(element) {\r\n    const modalForm = new ModalForm({\r\n        formClass: \"local_linkman\\\\form\\\\link_add_form\",\r\n        // Add as many arguments as you need, they will be passed to the form:\r\n        args: {id: element.getAttribute('data-id')},\r\n        // Pass any configuration settings to the modal dialogue, for example, the title:\r\n        modalConfig: {title: \"Add external link\"},\r\n        // DOM element that should get the focus after the modal dialogue is closed:\r\n        returnFocus: element,\r\n    });\r\n    return modalForm;\r\n}\r\n\r\nfunction init() {\r\n    $(Selectors.addBtn).on('click',e => {\r\n        initAddForm(e)\r\n    })\r\n}\r\n\r\nexport default {\r\n    init\r\n}"],"names":["Selectors","initAddForm","e","preventDefault","modalForm","element","ModalForm","formClass","args","id","getAttribute","modalConfig","title","returnFocus","getForm","target","addEventListener","events","FORM_SUBMITTED","setTimeout","location","reload","show","init","on"],"mappings":"+WAGMA,iBACM,wBAIHC,YAAYC,GACjBA,EAAEC,uBAEIC,mBAUOC,gBACK,IAAIC,mBAAU,CAC5BC,UAAW,qCAEXC,KAAM,CAACC,GAAIJ,QAAQK,aAAa,YAEhCC,YAAa,CAACC,MAAO,qBAErBC,YAAaR,UAlBCS,CADFZ,EAAEa,QAElBX,UAAUY,iBAAiBZ,UAAUa,OAAOC,gBAAgB,KACxDC,YAAW,WACPC,SAASC,WACV,QAGPjB,UAAUkB,oBAsBC,CACXC,oCANEvB,kBAAkBwB,GAAG,SAAQtB,IAC3BD,YAAYC"}